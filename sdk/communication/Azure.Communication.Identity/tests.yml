trigger: none

extends:
  template: /eng/pipelines/templates/stages/archetype-sdk-tests.yml
  parameters:
    ServiceDirectory: communication
    Project: Azure.Communication.Identity
    UseFederatedAuth: true
    CloudConfig:
      Public:
        ServiceConnection: azure-sdk-tests
        SubscriptionConfigurationFilePath: eng/common/TestResources/sub-config/AzurePublicMsft.json
        SubscriptionConfigurations:
          - $(sub-config-communication-services-cloud-test-identity-cte)
        #  - $(sub-config-azure-cloud-test-resources)
        # These resources are hosted OUTSIDE the MSFT tenant:
        #  - $(sub-config-communication-services-cloud-test-resources-common)
        #   - $(sub-config-communication-services-cloud-test-resources-net)
      PPE:
        # ServiceConnection: azure-sdk-tests-communication-torus
        # SubscriptionConfigurationFilePath: sdk/communication/communication-ppe-torus.json
        SubscriptionConfigurations:
          - $(sub-config-communication-ppe-test-resources-common)
          - $(sub-config-communication-ppe-test-resources-net)
      Int:
        SubscriptionConfigurations:
          - $(sub-config-communication-int-test-resources-common)
          - $(sub-config-communication-int-test-resources-net)
    Clouds: Public,PPE,Int
    TestResourceDirectories:
      - communication/



