// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.

// <auto-generated/>

#nullable disable

using System;
using System.Collections.Generic;
using System.Globalization;
using System.Text.Json;

namespace Azure.Compute.Batch
{
    /// <summary>
    /// Collection of header values that describe Batch File properties
    /// </summary>
    public partial class BatchFileProperties
    {
        internal BatchFileProperties(bool batchFileIsDirectory, string batchFileMode, string batchFileUrl, DateTime creationTime)
        {
            BatchFileIsDirectory = batchFileIsDirectory;
            BatchFileMode = batchFileMode;
            BatchFileUrl = batchFileUrl;
            CreationTime = creationTime;
        }

        /// <summary> Whether the object represents a directory. </summary>
        public bool BatchFileIsDirectory { get; }

        /// <summary> The file mode attribute in octal format. </summary>
        public string BatchFileMode { get; }

        /// <summary> The URL of the file. </summary>
        public string BatchFileUrl { get; }

        /// <summary> The file creation time. </summary>
        public DateTime CreationTime { get; }

        /// <summary> Deserializes the model from a raw response. </summary>
        /// <param name="response"> The response to deserialize the model from. </param>
        internal static BatchFileProperties FromResponse(Response response)
        {
            string batchFileIsDirectoryStr = "";
            bool batchFileIsDirectory = false;
            string batchFileMode = "";
            string batchFileUrl = "";
            string creationTimeStr = "";

            response.Headers.TryGetValue("ocp-creation-time", out creationTimeStr);
            response.Headers.TryGetValue("ocp-batch-file-isdirectory", out batchFileIsDirectoryStr);
            response.Headers.TryGetValue("ocp-batch-file-url", out batchFileUrl);
            response.Headers.TryGetValue("ocp-batch-file-mode", out batchFileMode);

            Boolean.TryParse(batchFileIsDirectoryStr, out batchFileIsDirectory);
            DateTime creationTime = DateTime.Parse(creationTimeStr, CultureInfo.InvariantCulture, DateTimeStyles.AssumeUniversal);

            return new BatchFileProperties(batchFileIsDirectory, batchFileMode, batchFileUrl, creationTime);
        }
    }
}
